<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Stock Price Correlations</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/antd/3.17.0/antd.css">

    <script src="./selectCompany/build/dist/js/selectCompanyElement.0.1.0.js"></script>
    <script src="./companyCorrelation/build/dist/js/companyCorrelationElement.0.1.0.js"></script>
    <script src="./hashParamUtil.js"></script>

    <style>
        .container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .left {
            margin-left: 1em;
        }

        .right {
            margin-right: 1em;
        }

        .row {
            display: flex;
            flex-direction: row;
            width: 100%;
            justify-content: space-between;
        }

        .fullwidth {
            width: 100%;
        }

        .fullheight {
            height: 100%;
        }

    </style>
</head>
<body>

<div class="container">
    <div class="row">
        <div class="left"><small>Company Y</small><select-company id="selectCompany1"></select-company></div>
        <div class="right"><small>Company X</small><select-company id="selectCompany2"></select-company></div>
    </div>
    <div class="row fullheight">
        <div class="fullwidth"><company-correlation id="companyCorrelation"></company-correlation></div>
    </div>
</div>

<script>
    (function () {
        var params = getHashParams();
        var symbolX = params.symbolX;
        var symbolY = params.symbolY;

        function _set() {
            setHashParams({symbolX: symbolX, symbolY: symbolY});
        }

        function onChangeCompany1(symbol) {
            document.getElementById("companyCorrelation").setAttribute("symbol-y", symbol);
            symbolY = symbol;
            _set();
        }

        function onChangeCompany2(symbol) {
            document.getElementById("companyCorrelation").setAttribute("symbol-x", symbol)
            symbolX = symbol;
            _set();
        }

        document.getElementById("selectCompany1").onChangeCompany = onChangeCompany1;
        document.getElementById("selectCompany1").setAttribute("initial-short", symbolY);

        document.getElementById("selectCompany2").onChangeCompany = onChangeCompany2;
        document.getElementById("selectCompany2").setAttribute("initial-short", symbolX);
    })()
</script>

</body>
</html>